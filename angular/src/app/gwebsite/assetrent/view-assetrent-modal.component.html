<div
    bsModal
    #viewModal="bs-modal"
    class="modal fade"
    tabindex="-1"
    role="dialog"
    aria-labelledby="viewModal"
    aria-hidden="true"
    [config]="{ backdrop: 'static' }"
>
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-body">
                <div class="col-xs-6 text-right">
                    <button
                        (click)="createDetailAssetRent()"
                        *ngIf="
                            isGranted(
                                'Pages.Administration.DetailAssetRent.Create'
                            )
                        "
                        class="btn btn-primary"
                    >
                        <i class="fa fa-plus"></i>
                        {{ l("CreateNewDetailAssetRent") }}
                    </button>
                </div>
                <div class="row align-items-center">
                    <!--<Primeng-TurboTable-Start>-->
                    <div
                        class="primeng-datatable-container"
                        [busyIf]="primengTableHelper.isLoading"
                    >
                        <p-table
                            #dataTable
                            [value]="primengTableHelper.records"
                            rows="{{
                                primengTableHelper.defaultRecordsCountPerPage
                            }}"
                            [paginator]="false"
                            [responsive]="primengTableHelper.isResponsive"
                        >
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>
                                        Tên tài sản
                                        <p-sortIcon
                                            field="nameAsset"
                                        ></p-sortIcon>
                                    </th>
                                    <th>
                                        Ngày thanh toán
                                        <p-sortIcon field="dayPay"></p-sortIcon>
                                    </th>
                                    <th>
                                        đã trả ?
                                        <p-sortIcon field="isPay"></p-sortIcon>
                                    </th>
                                    <th>
                                        Lãi xuất
                                        <p-sortIcon field="rate"></p-sortIcon>
                                    </th>
                                    <th>
                                        tiền trả VND
                                        <p-sortIcon field="money"></p-sortIcon>
                                    </th>
                                    <th>
                                        Mô tả
                                    </th>
                                    <th>{{ l("Edit") }}</th>
                                </tr>
                            </ng-template>
                            <ng-template
                                pTemplate="body"
                                let-record="$implicit"
                            >
                                <tr>
                                    <td>
                                        <span class="ui-column-title"
                                            >Tên tài sản</span
                                        >
                                        <span title="{{ record.nameAsset }}">{{
                                            truncateString(record.nameAsset)
                                        }}</span>
                                    </td>
                                    <td>
                                        <span class="ui-column-title"
                                            >Ngày thanh toán</span
                                        >
                                        <span title="{{ record.dayPay }}">{{
                                            truncateString(record.dayPay)
                                        }}</span>
                                    </td>
                                    <td>
                                        <span class="ui-column-title"
                                            >đã trả ?</span
                                        >
                                        <span title="{{ record.isPay }}">{{
                                            truncateString(record.isPay)
                                        }}</span>
                                    </td>
                                    <td>
                                        <span class="ui-column-title"
                                            >lãi xuất</span
                                        >
                                        <span title="{{ record.rate }}">{{
                                            truncateString(record.rate)
                                        }}</span>
                                    </td>
                                    <td>
                                        <span class="ui-column-title"
                                            >Tiền trả</span
                                        >
                                        <span title="{{ record.money }}">{{
                                            truncateString(record.money)
                                        }}</span>
                                    </td>
                                    <td>
                                        <span class="ui-column-title"
                                            >Mô tả</span
                                        >
                                        <span title="{{ record.describe }}">{{
                                            truncateString(record.describe)
                                        }}</span>
                                    </td>
                                    <td>
                                        <button
                                            class="btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill"
                                            (click)="
                                                createOrEditModal.show(
                                                    record.id
                                                )
                                            "
                                            title="{{ l('Edit') }}"
                                        >
                                            <i
                                                class="fa fa-edit"
                                                [attr.aria-label]="l('Edit')"
                                            ></i>
                                        </button>

                                        <button
                                            class="btn m-btn m-btn--hover-accent m-btn--icon m-btn--icon-only m-btn--pill"
                                            (click)="
                                                deleteDetailAssetRent(record.id)
                                            "
                                            title="{{ l('Delete') }}"
                                        >
                                            <i
                                                class="fa fa-times"
                                                [attr.aria-label]="l('Delete')"
                                            ></i>
                                        </button>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                        <div
                            class="primeng-no-data"
                            *ngIf="primengTableHelper.totalRecordsCount == 0"
                        >
                            {{ l("NoData") }}
                        </div>
                        <div class="primeng-paging-container">
                            <p-paginator
                                rows="{{
                                    primengTableHelper.defaultRecordsCountPerPage
                                }}"
                                #paginator
                                [totalRecords]="
                                    primengTableHelper.totalRecordsCount
                                "
                                [rowsPerPageOptions]="
                                    primengTableHelper.predefinedRecordsCountPerPage
                                "
                            >
                            </p-paginator>
                            <span class="total-records-count">
                                {{
                                    l(
                                        "TotalRecordsCount",
                                        primengTableHelper.totalRecordsCount
                                    )
                                }}
                            </span>
                        </div>
                    </div>
                    <!--<Primeng-TurboTable-End>-->
                </div>
            </div>
            <div class="modal-footer">
                <button
                    [disabled]="saving"
                    type="button"
                    class="btn btn-default"
                    (click)="close()"
                >
                    {{ l("Cancel") }}
                </button>
            </div>
        </div>
    </div>
    <createDetailAssetRentModal
        #createOrEditModal
        (modalSave)="reloadPage()"
    ></createDetailAssetRentModal>
</div>
